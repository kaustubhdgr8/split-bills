{"version":3,"sources":["../src/scripts/app.js"],"names":["activePage","window","location","pathname","db","users","_initFirebase","renderView","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebase","apps","length","initializeApp","database","userIndex","ref","once","then","snapshot","val","_renderUsers","renderUserDetails","document","getElementById","classList","add","list","Object","entries","index","user","avatar","name","amount","Math","abs","toFixed","innerHTML","_randomNumber","gender","n","floor","random","details","settleButton","remindButton","number","date","remove","settleDues","confirm","update","Date","toLocaleDateString","day","month","year","settled","removeUser","alert","editUser","innerText","setAttribute","value","checked","getElementsByName","radio","addUser","submitUserForm","getAttribute","userName","DOMPurify","sanitize","ALLOWED_TAGS","userNumber","userData","infoChanged","key","child","push","newUser"],"mappings":"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","sourcesContent":["/**\r\n * GLobal variables\r\n */\r\nlet activePage = window.location.pathname;\r\nlet db;\r\nlet users = [];\r\n\r\n/**\r\n * initialization\r\n */\r\n_initFirebase();\r\nrenderView();\r\n\r\n/**\r\n * Function declarations\r\n */\r\nfunction _initFirebase() {\r\n  const firebaseConfig = {\r\n    apiKey: \"AIzaSyDFB9Kr3k6rI0T_94lO6hcV3pWU_X-XJ5A\",\r\n    authDomain: \"javascript-293715.firebaseapp.com\",\r\n    databaseURL: \"https://javascript-293715.firebaseio.com\",\r\n    projectId: \"javascript-293715\",\r\n    storageBucket: \"javascript-293715.appspot.com\",\r\n    messagingSenderId: \"711748984217\",\r\n    appId: \"1:711748984217:web:10f6e4e39b074cb0a7c708\",\r\n  };\r\n  if (!firebase.apps.length) {\r\n    firebase.initializeApp(firebaseConfig);\r\n  }\r\n  db = firebase.database();\r\n}\r\n\r\nfunction renderView(userIndex = null) {\r\n  if (activePage === \"/users.html\") {\r\n    db.ref(\"bill-splitter/users/\")\r\n      .once(\"value\")\r\n      .then((snapshot) => {\r\n        users = snapshot.val();\r\n        _renderUsers();\r\n        if (userIndex) {\r\n          renderUserDetails(userIndex);\r\n        } else {\r\n          document\r\n            .getElementById(\"user-details__container\")\r\n            .classList.add(\"hidden\");\r\n        }\r\n      });\r\n  }\r\n}\r\n\r\nfunction _renderUsers() {\r\n  if (users.length != 0) {\r\n    let list = \"\";\r\n\r\n    for (let [index, user] of Object.entries(users)) {\r\n      list += `<a href=\"#\" class=\"list-group-item list-group-item-action d-flex justify-content-between align-items-center\" onclick=\"renderUserDetails('${index}')\">\r\n          <span>\r\n            <img src=\"assets/images/${user.avatar}.jpg\" alt=\"${user.avatar}\" class=\"custom__user-list--image\" />\r\n            <span class=\"ml-1 h5\">${user.name}</span>\r\n          </span>`;\r\n      if (user.amount < 0) {\r\n        list += `<span class=\"badge badge-danger custom__user-list--amount\">$${Math.abs(\r\n          user.amount\r\n        ).toFixed(2)}</span> `;\r\n      } else if (user.amount > 0) {\r\n        list += `<span class=\"badge badge-success custom__user-list--amount\">$${user.amount.toFixed(\r\n          2\r\n        )}</span>`;\r\n      } else {\r\n        list += `<span class=\"badge badge-secondary custom__user-list--amount\">$${user.amount.toFixed(\r\n          2\r\n        )}</span>`;\r\n      }\r\n      list += `</a>`;\r\n    }\r\n    document.getElementById(\"users\").innerHTML = list;\r\n  } else {\r\n    document.getElementById(\r\n      \"users\"\r\n    ).innerHTML = `<div class=\"alert alert-warning\" role=\"alert\">No friends found! Add friends now and split your bills easily.</div>`;\r\n  }\r\n}\r\n\r\nfunction _randomNumber(gender) {\r\n  const n = Math.floor(Math.random() * (16 - 1 + 1) + 1);\r\n  if (gender === \"m\") {\r\n    return n % 2 !== 0 ? n : _randomNumber(gender);\r\n  } else if (gender === \"f\") {\r\n    return n % 2 === 0 ? n : _randomNumber(gender);\r\n  } else {\r\n    return n;\r\n  }\r\n}\r\n\r\n/**\r\n * Events\r\n */\r\nfunction renderUserDetails(userIndex) {\r\n  let details = `<h3 class=\"card-title\">${users[userIndex].name}</h3>`;\r\n  let settleButton = `<a href=\"#\" class=\"btn btn-primary\" onclick=\"settleDues('${userIndex}')\">Settle</a>`;\r\n  let remindButton = \"\";\r\n\r\n  if (users[userIndex].amount < 0) {\r\n    details += `<p class=\"h4 text-danger\">you owe $${Math.abs(\r\n      users[userIndex].amount\r\n    ).toFixed(2)}</p>`;\r\n  } else if (users[userIndex].amount > 0) {\r\n    details += `<p class=\"h4 text-success\">owes you $${users[\r\n      userIndex\r\n    ].amount.toFixed(2)}</p>`;\r\n    if (users[userIndex].number && users[userIndex].number != \"\") {\r\n      remindButton = `<a href=\"tel:${users[userIndex].number}\" class=\"btn btn-outline-success\">Remind</a>`;\r\n    }\r\n  } else {\r\n    details += `<p class=\"h4 text-secondary\">all settled up</p>`;\r\n    settleButton = \"\";\r\n  }\r\n  details += `<p class=\"card-text\">\r\n      <small class=\"text-muted\">Last updated on ${users[userIndex].date}</small>\r\n    </p>`;\r\n\r\n  document.getElementById(\r\n    \"user-details__image\"\r\n  ).innerHTML = `<img src=\"assets/images/${users[userIndex].avatar}.jpg\" class=\"card-img\" alt=\"${users[userIndex].avatar}\"/>`;\r\n  document.getElementById(\"user-details\").innerHTML = details;\r\n  document.getElementById(\r\n    \"user-details__cta\"\r\n  ).innerHTML = `<div class=\"btn-group btn-group-sm\" role=\"group\">\r\n      ${settleButton}\r\n      ${remindButton}\r\n    </div>\r\n    <div class=\"btn-group btn-group-sm\" role=\"group\">\r\n      <a href=\"#\" class=\"btn btn-outline-primary ml-2\" data-toggle=\"modal\" data-target=\"#form--user\" onclick=\"editUser('${userIndex}')\">Edit profile</a>\r\n      <a href=\"#\" class=\"btn btn-outline-danger\" onclick=\"removeUser('${userIndex}')\">Remove</a>\r\n    </div>`;\r\n  document.getElementById(\"user-details__container\").classList.remove(\"hidden\");\r\n}\r\n\r\nfunction settleDues(userIndex) {\r\n  if (confirm(\"Do you want to settle all dues?\")) {\r\n    db.ref(`bill-splitter/users/${userIndex}`).update({\r\n      amount: 0,\r\n      date: new Date().toLocaleDateString(\"en-GB\", {\r\n        day: \"numeric\",\r\n        month: \"short\",\r\n        year: \"numeric\",\r\n      }),\r\n      settled: true,\r\n    });\r\n    renderView(userIndex);\r\n  }\r\n}\r\n\r\nfunction removeUser(userIndex) {\r\n  if (users[userIndex].amount !== 0) {\r\n    alert(\"There are dues outstanding!\\nThe user can't be removed.\");\r\n  } else if (confirm(\"Are you sure?\\nThere is no going back!\")) {\r\n    db.ref(`bill-splitter/users/${userIndex}`).remove();\r\n    renderView();\r\n  }\r\n}\r\n\r\nfunction editUser(userIndex) {\r\n  document.getElementById(\"user-form__title\").innerText = \"Edit profile\";\r\n  document.getElementById(\"user-form\").setAttribute(\"data-user\", userIndex);\r\n  document.getElementById(\"username\").value = users[userIndex].name;\r\n  document.getElementById(\"number\").value = users[userIndex].number;\r\n  document.getElementById(\"consent\").checked = false;\r\n  for (let radio of document.getElementsByName(\"gender\")) {\r\n    if (radio.value === users[userIndex].gender) {\r\n      radio.checked = true;\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\nfunction addUser() {\r\n  document.getElementById(\"user-form__title\").innerText = \"Add a friend\";\r\n  document.getElementById(\"user-form\").setAttribute(\"data-user\", \"\");\r\n  document.getElementById(\"username\").value = \"\";\r\n  document.getElementById(\"number\").value = \"\";\r\n  document.getElementById(\"consent\").checked = false;\r\n  for (let radio of document.getElementsByName(\"gender\")) {\r\n    radio.checked = false;\r\n  }\r\n}\r\n\r\nfunction submitUserForm() {\r\n  const userIndex = document\r\n    .getElementById(\"user-form\")\r\n    .getAttribute(\"data-user\");\r\n  const userName = DOMPurify.sanitize(\r\n    document.getElementById(\"username\").value,\r\n    {\r\n      ALLOWED_TAGS: [],\r\n    }\r\n  );\r\n  const userNumber = DOMPurify.sanitize(\r\n    document.getElementById(\"number\").value,\r\n    {\r\n      ALLOWED_TAGS: [],\r\n    }\r\n  );\r\n  let gender = \"o\";\r\n  for (let radio of document.getElementsByName(\"gender\")) {\r\n    if (radio.checked) {\r\n      gender = radio.value;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (userIndex !== \"\") {\r\n    let userData = {};\r\n    let infoChanged = false;\r\n\r\n    if (userName !== users[userIndex].name) {\r\n      userData.name = userName;\r\n      infoChanged = true;\r\n    }\r\n    if (userNumber !== users[userIndex].number) {\r\n      userData.number = userNumber;\r\n      infoChanged = true;\r\n    }\r\n    if (gender !== users[userIndex].gender) {\r\n      userData.gender = gender;\r\n      userData.avatar = \"avatar-\" + _randomNumber(gender);\r\n      infoChanged = true;\r\n    }\r\n\r\n    if (infoChanged) {\r\n      userData.date = new Date().toLocaleDateString(\"en-GB\", {\r\n        day: \"numeric\",\r\n        month: \"short\",\r\n        year: \"numeric\",\r\n      });\r\n      db.ref(`bill-splitter/users/${userIndex}`).update(userData);\r\n      renderView(userIndex);\r\n    }\r\n  } else {\r\n    const key = db.ref().child(\"bill-splitter\").push().key;\r\n    let newUser = {};\r\n\r\n    newUser[`bill-splitter/users/${key}`] = {\r\n      name: userName,\r\n      number: userNumber,\r\n      gender: gender,\r\n      amount: 0,\r\n      avatar: \"avatar-\" + _randomNumber(gender),\r\n      date: new Date().toLocaleDateString(\"en-GB\", {\r\n        day: \"numeric\",\r\n        month: \"short\",\r\n        year: \"numeric\",\r\n      }),\r\n      settled: true,\r\n    };\r\n    db.ref().update(newUser);\r\n    renderView();\r\n  }\r\n}\r\n"],"file":"app.js"}